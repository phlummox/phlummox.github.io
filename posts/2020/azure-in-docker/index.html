<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" >
  <meta name="viewport"       content="width=device-width, initial-scale=1" >
  <meta name="language"       content="en" >
  <meta name="DC.Language"    content="en" >
  <meta name="DC.Format"      content="text/html" >

  <meta name="og:site_name"   content="phlummox&#39;s blog">
  <meta property="og:url"     content="https://phlummox.dev/posts/2020/azure-in-docker/" >

  <meta name="author"         content="phlummox" >
  <meta name="copyright"      content="phlummox" >
  <meta name="DC.Creator"     content="phlummox" >

  <meta name="keywords"       content="computer science, blog, personal" >
  <meta name="DC.Subject"     content="computer science, blog, personal" >

  <title>Running Azure&#39;s az command-line tool from a docker container; or, the &quot;credentials in a container&quot; trick - phlummox&#39;s blog</title>
  <meta name="description"    content="Running Azure&#39;s az command-line tool from a docker container; or, the &quot;credentials in a container&quot; trick - phlummox&#39;s blog" >
  <meta name="twitter:title"  content="Running Azure&#39;s az command-line tool from a docker container; or, the &quot;credentials in a container&quot; trick - phlummox&#39;s blog" >
  <meta name="DC.Title"       content="Running Azure&#39;s az command-line tool from a docker container; or, the &quot;credentials in a container&quot; trick - phlummox&#39;s blog" >
  <meta property="og:title"   content="Running Azure&#39;s az command-line tool from a docker container; or, the &quot;credentials in a container&quot; trick - phlummox&#39;s blog" >
  <meta name="DC.Description" content="Running Azure&#39;s az command-line tool from a docker container; or, the &quot;credentials in a container&quot; trick - phlummox&#39;s blog" >

  <meta name="date.created"         content="2020-08-17T00:00:00.000Z">
  <meta name="date.available"       content="2020-08-17T00:00:00.000Z">
  <meta name="DC.dateCopyrighted"   content="2020-08-17T00:00:00.000Z">

  <meta name="date.modified"        content="2022-02-23T06:42:13.829Z">
  <meta property="og:updated_time"  content="2022-02-23T06:42:13.829Z" >

  <meta name="google-site-verification" content="PwRmljegtbdwAY0IXp87X_n1jKLbTS6DxB5Z-WOonEU" >



  <link rel="canonical"   href="https://phlummox.dev/posts/2020/azure-in-docker/" >
  <link rel="alternate"   href="https://phlummox.dev/feed.xml" type="application/atom+xml" title="phlummox&#39;s blog">

  <link rel="sitemap"     href="https://phlummox.dev/sitemap.xml" type="application/xml" title="Sitemap" >
  <link rel="icon"        href="/images/phlummox-icon.png" type="image/png" >
  <link rel="stylesheet"  href="/css/main.css" >
  <link rel="preconnect"  href="https://fonts.gstatic.com/" >
  <link rel="preconnect"  href="https://fonts.gstatic.com/" crossorigin >
  <link rel="stylesheet"  href="https://fonts.googleapis.com/css?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap">

  <link rel="stylesheet"  href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


<!-- extracts from bootstrap.css -->
<style>
/*!
 * Bootstrap v3.4.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */a:active,a:hover{outline:0}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.nav{padding-left:0;margin-bottom:0;list-style:none}.nav>li{position:relative;display:block}.nav>li>a{position:relative;display:block;padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.navbar-fixed-top{top:0;position:fixed;border-left-width:0;border-right-width:0;z-index:1030}@media (max-width:767px){.navbar-fixed-top{width:100vw}}@media (min-width:768px){.navbar-fixed-top{right:0;left:0}}.navbar-brand{height:50px;padding:15px 15px;font-size:18px;line-height:20px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-toggle{padding:9px 10px;margin-right:15px;margin-top:8px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (min-width:768px){.navbar-nav{margin:0}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}.navbar-toggle{border-color:#ddd}.navbar-toggle:focus,.navbar-toggle:hover{background-color:#ddd}.navbar-toggle .icon-bar{background-color:#888}@-ms-viewport{width:device-width}.visible-xs{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}</style>
<!-- end content extracted from bootstrap.css -->
<!-- navbar styling -->
<style>
nav{padding:0 15px;border-top:var(--border-width) solid var(--accent);box-shadow:inset 0 1px 0 rgba(255,255,255,.15),0 1px 5px rgba(0,0,0,.075);background-color:#f8f8f8;min-height:50px;margin-bottom:20px;border-bottom:1px solid #e7e7e7}nav *{list-style:none}nav li{position:relative;display:block}nav .navbar-brand{color:#777!important}nav li>a{position:relative;display:block;padding:10px 15px}nav .navbar-body{border-color:#e7e7e7;border-top-width:1px;border-top-style:solid;max-height:340px;align-items:center}nav .navnew-header{display:flex;justify-content:space-between}nav li>a{color:#777}nav li>a:link,nav li>a:visited{color:#777}nav li>a{padding-top:10px;padding-bottom:10px;line-height:20px}nav .nav-menu{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;flex-direction:column}.nav-menu>*{margin:0;width:100%}nav .toggle{order:1}nav .navbar-body{display:flex;max-width:1150px}nav ul{display:flex}@media (min-width:768px){nav .navbar-body{flex-direction:row;justify-content:space-between}.nav-links-lefty{flex-direction:row}}@media (max-width:767px){nav{border-top-width:0}nav .navbar-body{flex-direction:column}.nav-links-lefty{flex-direction:column}}@media (min-width:768px){nav .navbar-body{border-top-style:none}}</style>
<!-- local theme -->
<style>
  html body {
      font-family: 'Raleway', sans-serif;
      background-color: white;
  }

  :root {
      --accent: #447db9;
      --border-width:  5px ;
  }
</style>

<style>
.web-login {
  display: block;
  padding: 0.5em;
  font-size: 13px;
  font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
  margin: 0 0 0.5ex;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

</style>



  <script>
    ////
    // toggle expandable menu
    // see <https://css-tricks.com/using-css-transitions-auto-dimensions/>

    // change from css-tricks version:
    // expansion and collapse is only relevant for xtra-small
    // screens (max-width 767px), and within that media scope,
    // we put our 'height: 0' and 'height: auto'
    // on a style '.expandable-content-xs[data-expanded="true"]'
    // (or 'false', as the case may be).
    // So when we're _marking_ that data-expanded attribute,
    // it should be the very last thing we do -- so its
    // at a slightly different posn in the func to the css-tricks
    // example.
    function collapseEl(el) {
      // get real height of inner content
      var elHeight = el.scrollHeight;
      // temporarily disable all css transitions
      var elementTransition = el.style.transition;
      //console.log("collapsing. el = ", [el], ", ht = ", elHeight, ", style= ", el.style, "trans:", elementTransition);
      el.style.transition = '';

      // as soon as that style change has taken effect,
      // explicitly set height to current pixel height so we
      // aren't transitioning out of 'auto'
      requestAnimationFrame(function() {
        el.style.height     = elHeight + 'px';
        el.style.transition = elementTransition;

        // on frame after height change taken effect,
        // do transition to height: 0
        requestAnimationFrame(function() {
          el.style.height = 0 + 'px';

          // mark as "not currently expanded"
          el.setAttribute('data-expanded', 'false');
        });
      });

    }

    function expandEl(el) {
      // get height of inner content
      var elHeight = el.scrollHeight;
      // transition to height of inner content
      el.style.height = elHeight + 'px';

      // when the next css transition finishes
      // (which should be the one we just triggered) ...
      el.addEventListener('transitionend', function(e) {
        // only gets trigger once
        el.removeEventListener('transitionend', arguments.callee);
        // remove "height" from the el's inline styles, so it can return to its initial value
        el.style.height = null;
      });

      // mark as "currently expanded"
      el.setAttribute('data-expanded', 'true');
    }

    ////
    // de-obfuscate email on hover

    function getEmailLinkEl() {
      queryRes = document.evaluate("//nav//a[starts-with(./@href, 'mailto')]", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
      return queryRes.singleNodeValue;
    }

    function deObfuscate(el) {
      if(el.decoded != true) {
        el.href = "mailto:" + atob(el.href.replace(/^mailto:/,""));
        el.decoded = true;
      }
    };

    function obfuscate(el) {
      if(el.decoded != false) {
        el.href = "mailto:" + btoa(el.href.replace(/^mailto:/,""));
        el.decoded = false;
      }
    };


    ////
    // add listeners once DOM loaded

    document.addEventListener("DOMContentLoaded", function(event) {
      //console.log("loaded");

      var emailEl = getEmailLinkEl();
      if (emailEl == null) {
        console.error("ack! no email in navbar?");
      } else {
        emailEl.onmouseover  = () => deObfuscate(emailEl);
        emailEl.onmouseout   = () => obfuscate(emailEl);
      }

      // nav toggle listener
      const style_to_expand = 'expandable-content-xs';
      let btn = document.querySelector('#navbar-toggle-btn')
      btn.addEventListener('click', function(e) {
        var expandableEl = document.querySelector('.' + style_to_expand);
        // abandon if nothing found
        if (expandableEl == null) {
          return;
        }
        var isCollapsed = expandableEl.getAttribute('data-expanded') === 'false';

        if(isCollapsed) {
          expandEl(expandableEl)
          expandableEl.setAttribute('data-expanded', 'true')
        } else {
          collapseEl(expandableEl)
        }
      });

    }); // end domloaded
  </script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-220735168-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-220735168-1');
  gtag('config', 'G-252DFQNZJL');
</script>

  <!--
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" />
  -->



</head>
<body>
    <nav class="navbar-fixed-top">
      <div class="nav-menu">
          <div class="navnew-header nav">
              <a class="navbar-brand goto-top visible-xs" aria-label="navigate to top of page" href="#">#</a>
              <button class="toggle visible-xs navbar-toggle" id="navbar-toggle-btn"
                      aria-label="toggle navigation menu">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </button>
          </div>
          <div class="expandable-content-xs navbar-body nav" data-expanded="false">
                <!-- navbar links -->
                <ul class="navbar-nav nav nav-links-lefty">
                  <li><a href="/">Home</a></li>
                  <li><a href="/posts/">Posts</a></li>
                  <li><a href="/tags/">Tags</a></li>
                </ul>
                <!-- navbar icons -->
                <ul class="nav navbar-nav">
                  <li class="navbar-icon"><a href="mailto:Z2l0aHViLmlvQHBobHVtbW94LmRldg==" rel="external"  aria-label="email address"><i class="fa fa-envelope-o"></i></a></li>
                  <li class="navbar-icon"><a href="https://github.com/phlummox/" rel="external"  aria-label="github profile"><i class="fa fa-github"></i></a></li>
                  <li class="navbar-icon"><a href="https://twitter.com/phlummox/" rel="external"  aria-label="twitter profile"><i class="fa fa-twitter"></i></a></li>
                  <li class="navbar-icon"><a href="https://stackoverflow.com/users/6818792/phlummox/" rel="external"  aria-label="stackoverflow profile"><i class="fa fa-stack-overflow"></i></a></li>
                  <li class="navbar-icon"><a href="https://www.reddit.com/user/phlummox/" rel="external"  aria-label="reddit profile"><i class="fa fa-reddit"></i></a></li>
                </ul>
          </div><!-- end menu items -->
      </div>
  </nav>

  <main>
    <article>
  <div class="item">
  <h1>Running Azure's <samp>az</samp> command-line tool from a docker container; or, the "credentials in a container" trick</h1>
  <div style="font-weight: 500;" >
    <time datetime="2020-08-17T00:00:00.000Z">17 August 2020</time>
  </div>
  <a href="/tags/azure/"><kbd class="item-tag">azure</kbd></a> <a href="/tags/docker/"><kbd class="item-tag">docker</kbd></a> <a href="/tags/container/"><kbd class="item-tag">container</kbd></a> <a href="/tags/cli/"><kbd class="item-tag">cli</kbd></a> 
  <div class="text-left single-content">
    <p>Every cloud platform provider has their own CLI tool they want you to
install, all with different dependencies and install methods.</p>
<p><a href="https://devcenter.heroku.com/articles/heroku-cli" target="_blank">Some</a> <a href="https://github.com/digitalocean/doctl/blob/master/README.md#snap-supported-os" target="_blank">want</a>
you to <a href="https://lwn.net/Articles/825005/" target="_blank">install</a>
their tools <a href="https://news.ycombinator.com/item?id=17055401" target="_blank">using</a> <a href="https://www.helpnetsecurity.com/2019/02/13/cve-2019-7304/" target="_blank">Snap</a>;
<a href="https://aws.amazon.com/cli/" target="_blank">some</a> want you
to run install scripts as <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html#cliv2-linux-install" target="_blank"><samp>root</samp></a> that
add files not managed by your OS’s package management
system;<sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup> <a href="https://help.sap.com/viewer/65de2977205c403bbc107264b8eccf4b/Cloud/en-US/8a8f17f5fd334fb583438edbd831d506.html#loio8a8f17f5fd334fb583438edbd831d506" target="_blank">some</a> want you to click through
<a href="/images/azure-in-docker--germany.png" target="_blank">a license</a> where
you agree to be bound by the laws of Germany.
Occasionally, you might find one who actually packages their tool
for <a href="https://cloud.google.com/sdk/install#installation_options" target="_blank">at least a few</a> different OS distributions, or even
provides a <a href="https://www.alibabacloud.com/help/doc-detail/121541.htm" target="_blank">statically-linked binary</a> plus the
<a href="https://github.com/aliyun/aliyun-cli" target="_blank">source code</a> it was built from.
Really though, the best CLI is one you <a href="https://www.infoq.com/articles/azure-cloud-shell/" target="_blank">don’t have to
install at all</a>.</p>
<p>I’m surprised (and annoyed, of course)
that more cloud providers don’t provide web-based shell
access to their tools. But when they don’t, the next
best option might be to install the tool in a Docker container.
(In any case, working in a <a href="https://www.npmjs.com/package/webssh2" target="_blank">webssh</a> session gets a bit
wearisome after a while, somewhere around the tenth time you
accidentally hit <code>ctrl-r</code> and refresh the page instead of searching
your command history. Installing a tool on your own machine
does have <em>some</em> benefits.)</p>
<p>Rather than having your development environment cluttered with dozens or
even hundreds of dependencies you neither want nor need, why not
confine each provider’s tools to a single Docker container? Then you
will have
to clutter your development environment
with potentially only <a href="https://www.docker.com/" target="_blank"><em>one</em></a> <a href="https://coreos.com/rkt/docs/latest/rkt-vs-other-projects.html#process-model" target="_blank">baroque</a>,
<a href="https://media.rubegoldberg.com/site/wp-content/uploads/2019/04/hachathon-1200x674.jpg" target="_blank">Rube</a>
<a href="https://news.ycombinator.com/item?id=9963242" target="_blank">Goldberg</a><a href="https://levelup.gitconnected.com/how-docker-authentication-works-by-documentation-mitm-and-implementation-e62cd7a31178#9bf4" target="_blank">–esque</a>,
<a href="https://www.smithsonianmag.com/science-nature/true-story-kudzu-vine-ate-south-180956325/" target="_blank">Kudzu-</a>pervasive
framework.<sup class="footnote-ref"><a href="#fn2" id="fnref2">2</a></sup></p>
<!--
sap archived at <http://archive.is/8wq7h>
-->
<p>Taking Azure’s <code>az</code> tool as an example, you can do it like so:</p>
<ol>
<li>
<p>Pull the Docker image (based on Alpine Linux) for the <code>az</code> CLI
tool:<sup class="footnote-ref"><a href="#fn3" id="fnref3">3</a></sup> <sup class="footnote-ref"><a href="#fn4" id="fnref4">4</a></sup></p>
<pre><code class="language-bash">docker pull mcr.microsoft.com/azure-cli
</code></pre>
</li>
<li>
<p>Create a docker volume which will hold the contents of the <code>/root</code>
directory, which is where our credentials are stored:</p>
<pre><code class="language-bash">docker -D run -v /root --name azconfig mcr.microsoft.com/azure-cli
</code></pre>
</li>
</ol>
<p>We now have a stopped Docker container called <code>azconfig</code>, containing an
anonymous volume<sup class="footnote-ref"><a href="#fn5" id="fnref5">5</a></sup> which contains the contents of the <code>/root</code>
directory. We can use the volume by supplying <code>--volumes-from azconfig</code>
as an argument to the <code>docker run</code> command.</p>
<p>(Note that we don’t supply <code>--rm</code> as an argument this first time round,
since we want to actually <em>keep</em> the container and its attached volume.)</p>
<ol start="3">
<li>
<p>Spin up a new container which mounts the volume from our <code>azconfig</code> one:</p>
<pre><code class="language-bash">docker run --rm -it --volumes-from azconfig mcr.microsoft.com/azure-cli
</code></pre>
</li>
</ol>
<p>This time we <em>do</em> use the <code>--rm</code> argument: we don’t care if this container
disappears, the credentials will be stored in the volume.</p>
<ol start="4">
<li>
<p>Inside the container, we can run</p>
<pre><code class="language-sh">az login
</code></pre>
<p>to log on. The tool displays a message like</p>
<div class="web-login " style="color: #AA5500 !important; font-family: monospace;">
<p>To sign in, use a web browser to open the page <a href="https://microsoft.com/devicelogin" style="color: #AA5500 !important; font-family: monospace;">https://microsoft.com/devicelogin</a> and enter the code XXXXXXXXX to authenticate.</p>
</div>
<p>where the “<code>XXXXXXXXX</code>” is some 9-character code Microsoft uses to
identify the device you’re logging in from. Follow the instructions,
and voilà – we’re in.</p>
</li>
</ol>
<p>Now we can run whatever commands we like inside the running container –
try typing <code>az account list</code>, just to check that the tool is working:</p>
<pre><code class="language-text">$ az account list
[
  {
    &quot;cloudName&quot;: &quot;AzureCloud&quot;,
    &quot;homeTenantId&quot;: &quot;&lt;REDACTED&gt;&quot;,
    &quot;id&quot;: &quot;&lt;REDACTED&gt;&quot;,
    &quot;isDefault&quot;: true,
    &quot;managedByTenants&quot;: [],
    &quot;name&quot;: &quot;Free Trial&quot;,
    &quot;state&quot;: &quot;Enabled&quot;,
    &quot;tenantId&quot;: &quot;&lt;REDACTED&gt;&quot;,
    &quot;user&quot;: {
      &quot;name&quot;: &quot;phlummox@phlummox.dev&quot;,
      &quot;type&quot;: &quot;user&quot;
    }
  }
]
</code></pre>
<p>And regardless of what we do with the new containers – keep them running,
stop them, throw them away – we can just run up a new one to access
our existing credentials and avoid having to log in again.</p>
<p>There. Don’t you feel better about life already? If only I’d done
something like this earlier, I could’ve avoided writing
<a href="/post/installing-travis-cli/">this</a> post.</p>
<p>The same sort of method should work perfectly well for other
command-line tools like
<a href="https://aws.amazon.com/cli/" target="_blank">Amazon’s</a>, <a href="https://devcenter.heroku.com/articles/heroku-cli" target="_blank">Heroku’s</a>,
<a href="https://github.com/travis-ci/travis-ci/issues/2055" target="_blank">Travis CI’s</a>, and so on.
Google <a href="https://cloud.google.com/sdk" target="_blank">Cloud SDK</a> and <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-docker.html#cliv2-docker-share-files" target="_blank">Amazon’s</a>
command-line tools are the only ones I’ve noticed where the provider
actually <a href="https://hub.docker.com/r/google/cloud-sdk/" target="_blank">tells users</a>
<a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-docker.html#cliv2-docker-share-files" target="_blank">about the method</a>
described here as an alternative to installing a godawful bunch of packages just to manage something in the cloud.
But I like to think that if enough of us join together, in a spirit
of good-will and positivity, and yell at cloud providers to fix their shit
up, then maybe someday the others will too.</p>
<!--
https://github.com/travis-ci/travis.rb#readme
-->
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Though to give Amazon credit, they do at least <em>tell</em> you
where their install script will be creating files. So it would be
pretty easy to package the resulting files up into whatever package
is native to your distribution (e.g. <code>.deb</code> or <code>.rpm</code> files). <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>Well, two, if your OS also
uses <a href="https://lwn.net/Articles/676831/" target="_blank">systemd</a>. <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>Microsoft hosts the <code>az</code> CLI docker images on its own registry,
the <a href="https://github.com/microsoft/containerregistry" target="_blank">Microsoft Container Registry</a>,
located at <a href="https://mcr.microsoft.com" target="_blank">https://mcr.microsoft.com</a>, so when pulling from it  we
have to use a <a href="https://windsock.io/referencing-docker-images/" target="_blank">qualified reference</a>
to the image we want. If we wanted to explore the tags available for
the <code>azure-cli</code> image, we could run <br>
  <br>
<code>curl -L https://mcr.microsoft.com/v2/azure-cli/tags/list</code>
 <br>
 <br>
<a href="https://jeeweetje.net/2019/07/10/exploring-containers-in-the-microsoft-container-registry-with-visual-studio-code/" target="_blank">This</a> blog post suggests it also should be possible to
explore the various repositories in the <a href="https://en.wikipedia.org/wiki/RAS_syndrome" target="_blank">MCR registry</a>
from within the very
nifty <a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> IDE, but I
couldn’t get that to work, and Microsoft
<a href="https://github.com/microsoft/containerregistry#faq" target="_blank">doesn’t seem</a> to want you to. <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p>Interestingly, if you look at the headers of the response
from <code>mcr.microsoft.com</code>, using <code>curl -v</code>, the <code>Host</code> name is
<code>openresty</code>, suggesting Microsoft’s registry is powered by the
open source
<a href="https://openresty.org/en/" target="_blank">OpenResty</a> variant of
Nginx, which adds to Nginx the ability to make use of libraries
written in LuaJIT.
Or uses it as a reverse proxy, anyway.
How things <a href="https://www.zdnet.com/article/ballmer-i-may-have-called-linux-a-cancer-but-now-i-love-it/" target="_blank">have changed</a> since the days of
<a href="https://www.theregister.com/2001/06/02/ballmer_linux_is_a_cancer/" target="_blank">“Linux is a cancer”</a> (or,
<a href="https://www.theregister.com/2000/07/31/ms_ballmer_linux_is_communism/" target="_blank">“communism”</a>) and
<a href="https://en.wikipedia.org/wiki/Embrace,_extend,_and_extinguish" target="_blank">“Embrace, extend, extinguish”</a>! Hopefully. <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p>In the tradition of IT people giving things <a href="https://martinfowler.com/bliki/TwoHardThings.html" target="_blank">terrible</a> <a href="https://alexene.dev/2020/08/17/webassembly-without-the-browser-part-1.html#what-is-webassembly" target="_blank">names</a>,
anonymous volumes are not actually anonymous (though they are
volumes). They just are given a <a href="https://docs.docker.com/storage/#more-details-about-mount-types" target="_blank">randomly-generated</a> name
when created – something euphonious and pleasant to read like
<code>71bc263a17ab4233d9d966c42bdb060c026ce6531c00fa5a7b7329834fe01914000000000000000000</code> for
instance. <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

  </div>
  </div>
  
  
    <h2 class="page-header">Comments</h2>
    <script defer src="https://cdn.commento.io/js/commento.js"
  data-css-override="https://phlummox.dev/css/main.css"
  data-auto-init="true"
  ></script>
<div id="commento"></div>

  
</article>



  </main>
    <footer>
    <p class="copyright text-muted"><a rel='license' href='https://creativecommons.org/licenses/by/4.0/'><img alt='Creative Commons License' style='border-width:0' src='https://licensebuttons.net/l/by/4.0/80x15.png' width='80' height='15' ></a><br>licensed under a <a rel='license' href='https://creativecommons.org/licenses/by/4.0/'>Creative Commons Attribution 4.0 International License</a>.<br>
</p>
  </footer>

</body>
</html>
